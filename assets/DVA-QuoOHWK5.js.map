{"version":3,"file":"DVA-QuoOHWK5.js","sources":["../../src/pages/contents/DVA.tsx"],"sourcesContent":["import React, { useState, useCallback, useEffect, useRef } from \"react\";\n\nimport ContentPageLayout from \"../../components/ContentPageLayout\";\n\nconst DVA: React.FC = () => {\n  const [gameState, setGameState] = useState<\n    \"idle\" | \"waiting\" | \"active\" | \"finished\"\n  >(\"idle\");\n  const [displayText, setDisplayText] = useState<string>(\"...\");\n  const [winner, setWinner] = useState<1 | 2 | null>(null);\n  const [foulPlayer, setFoulPlayer] = useState<1 | 2 | null>(null);\n  const [timeoutId, setTimeoutId] = useState<ReturnType<\n    typeof setTimeout\n  > | null>(null);\n\n  const gameDisplayRef = useRef<HTMLDivElement>(null);\n\n  const resetGame = useCallback(() => {\n    setGameState(\"idle\");\n    setDisplayText(\"...\");\n    setWinner(null);\n    setFoulPlayer(null);\n    document.body.style.overflow = \"auto\";\n    if (timeoutId !== null) clearTimeout(timeoutId);\n  }, [timeoutId]);\n\n  const handleStart = useCallback(() => {\n    if (gameState !== \"idle\") {\n      // Reset game\n      resetGame();\n      return;\n    }\n\n    // Start game\n    setGameState(\"waiting\");\n    setDisplayText(\"Waiting...\");\n    setWinner(null);\n    setFoulPlayer(null);\n\n    // Scroll to game area\n    if (gameDisplayRef.current !== null) {\n      gameDisplayRef.current.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"center\",\n      });\n    }\n\n    // Lock scroll during game\n    document.body.style.overflow = \"hidden\";\n\n    // Random delay between 2 and 10 seconds\n    const delay = Math.floor(Math.random() * 8000) + 2000;\n\n    const id = setTimeout(() => {\n      setDisplayText(\"Go!!!!!!!\");\n      setGameState(\"active\");\n    }, delay);\n\n    setTimeoutId(id);\n  }, [gameState, resetGame]);\n\n  const handlePlayerClick = useCallback(\n    (player: 1 | 2) => {\n      if (gameState === \"idle\" || gameState === \"finished\") return;\n\n      if (gameState === \"waiting\") {\n        // Foul - clicked too early\n        setFoulPlayer(player);\n        setWinner(player === 1 ? 2 : 1);\n        setGameState(\"finished\");\n        document.body.style.overflow = \"auto\";\n        if (timeoutId !== null) clearTimeout(timeoutId);\n      } else if (gameState === \"active\") {\n        // Valid click - player won\n        setWinner(player);\n        setGameState(\"finished\");\n        document.body.style.overflow = \"auto\";\n      }\n    },\n    [gameState, timeoutId],\n  );\n\n  // Clean up on unmount\n  useEffect(() => {\n    return (): void => {\n      if (timeoutId !== null) clearTimeout(timeoutId);\n      document.body.style.overflow = \"auto\";\n    };\n  }, [timeoutId]);\n\n  // SVG Symbol for DVA visualization\n  const svgSymbols = (\n    <svg>\n      <symbol id=\"dva-svg-src\" viewBox=\"0 0 100 100\">\n        <circle\n          cx=\"50\"\n          cy=\"50\"\n          r=\"40\"\n          stroke=\"currentColor\"\n          strokeWidth=\"3\"\n          fill=\"none\"\n        />\n        <line\n          x1=\"20\"\n          y1=\"50\"\n          x2=\"80\"\n          y2=\"50\"\n          stroke=\"currentColor\"\n          strokeWidth=\"3\"\n        />\n        <line\n          x1=\"50\"\n          y1=\"20\"\n          x2=\"50\"\n          y2=\"80\"\n          stroke=\"currentColor\"\n          strokeWidth=\"3\"\n        />\n      </symbol>\n    </svg>\n  );\n\n  return (\n    <ContentPageLayout title=\"動体視力勝負\" svgSymbols={svgSymbols}>\n      <div className=\"prose dark:prose-invert max-w-none\">\n        <p>動体視力勝負です。</p>\n\n        <h2 className=\"mt-8 text-2xl font-bold\">ルール</h2>\n        <p className=\"text-lg\">\n          下の「開始」をクリックすると始まります。画面中央の「白色」が「黒色」になった瞬間にそれぞれの場所をクリックしてください。早いほうが勝ちです。フライングは負けになります。\n        </p>\n\n        <div className=\"mt-10 flex flex-col items-center\">\n          <button\n            onClick={handleStart}\n            className=\"rounded-lg bg-blue-600 px-8 py-4 text-xl font-bold text-white shadow-lg transition-colors hover:bg-blue-700 focus:outline-none dark:bg-blue-700 dark:hover:bg-blue-600\"\n          >\n            {gameState === \"idle\" ? \"開始\" : \"リセット\"}\n          </button>\n\n          <div\n            ref={gameDisplayRef}\n            className={`mt-10 flex w-full flex-col items-stretch sm:flex-row sm:justify-center ${gameState === \"idle\" ? \"opacity-70\" : \"opacity-100\"}`}\n          >\n            <div\n              className={`flex-1 cursor-pointer border border-gray-300 bg-blue-100 p-8 text-center font-medium transition-colors dark:border-gray-700 dark:bg-blue-900/30 ${winner === 1 && foulPlayer === null ? \"bg-green-200 dark:bg-green-900/50\" : \"\"} ${foulPlayer === 1 ? \"bg-red-200 dark:bg-red-900/50\" : \"\"} `}\n              onClick={() => handlePlayerClick(1)}\n            >\n              player 1\n              {foulPlayer === 1 && (\n                <div className=\"mt-2 text-red-600 dark:text-red-400\">\n                  フライング!\n                </div>\n              )}\n            </div>\n\n            <div\n              className={`flex items-center justify-center border-t border-b border-gray-300 p-4 font-mono text-lg transition-colors dark:border-gray-700 ${gameState === \"active\" ? \"bg-gray-900 text-white dark:bg-white dark:text-gray-900\" : \"bg-white text-gray-900 dark:bg-gray-900 dark:text-white\"} `}\n            >\n              {displayText}\n            </div>\n\n            <div\n              className={`flex-1 cursor-pointer border border-gray-300 bg-red-100 p-8 text-center font-medium transition-colors dark:border-gray-700 dark:bg-red-900/30 ${winner === 2 && foulPlayer === null ? \"bg-green-200 dark:bg-green-900/50\" : \"\"} ${foulPlayer === 2 ? \"bg-red-200 dark:bg-red-900/50\" : \"\"} `}\n              onClick={() => handlePlayerClick(2)}\n            >\n              player 2\n              {foulPlayer === 2 && (\n                <div className=\"mt-2 text-red-600 dark:text-red-400\">\n                  フライング!\n                </div>\n              )}\n            </div>\n          </div>\n\n          {gameState === \"finished\" && (\n            <div className=\"mt-4 text-center\">\n              {foulPlayer !== null ? (\n                <p className=\"text-red-600 dark:text-red-400\">\n                  Player {foulPlayer} フライング! Player {winner} の勝ち!\n                </p>\n              ) : (\n                <p className=\"text-green-600 dark:text-green-400\">\n                  Player {winner} の勝ち!\n                </p>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </ContentPageLayout>\n  );\n};\n\nexport default DVA;\n"],"names":["DVA","gameState","setGameState","useState","displayText","setDisplayText","winner","setWinner","foulPlayer","setFoulPlayer","timeoutId","setTimeoutId","gameDisplayRef","useRef","resetGame","useCallback","handleStart","delay","id","handlePlayerClick","player","useEffect","svgSymbols","jsxs","jsx","ContentPageLayout"],"mappings":"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"}