{"version":3,"file":"Gacha-FoR__ghn.js","sources":["../../src/pages/contents/Gacha.tsx"],"sourcesContent":["import React, { useState } from \"react\";\n\nimport ContentPageLayout from \"../../components/ContentPageLayout\";\n\nconst Gacha: React.FC = () => {\n  const [selectedGacha, setSelectedGacha] = useState(\"\");\n  const [rollResults, setRollResults] = useState<string[]>([]);\n  const [totals, setTotals] = useState({\n    total: 0,\n    pu: 0,\n    rare: 0,\n    lose: 0,\n  });\n\n  const PROBABILITY_DEF = new Map([\n    [\"genshin\", [0.003, 0.003]],\n    [\"proseka\", [0.004, 0.026]],\n    [\"bluaka\", [0.007, 0.023]],\n    [\"monsuto\", [0.035, 0.12]],\n    [\"nikke\", [0.02, 0.02]],\n  ]);\n\n  const GACHA_NAMES = new Map([\n    [\"genshin\", \"gemshim\"],\n    [\"proseka\", \"projectMakai\"],\n    [\"bluaka\", \"blueAchieve\"],\n    [\"monsuto\", \"monsterStripe\"],\n    [\"nikke\", \"nike\"],\n  ]);\n\n  const rollGacha = (probability: number[], times: number): string[] => {\n    const results: string[] = [];\n    for (let i = 0; i < times; i++) {\n      const x = Math.random();\n      if (probability[0] > x) {\n        results.push(\"pu\");\n      } else if (probability[0] + probability[1] > x) {\n        results.push(\"rare\");\n      } else {\n        results.push(\"lose\");\n      }\n    }\n    return results;\n  };\n\n  const handleRoll = (times: number): void => {\n    if (selectedGacha === \"\") return;\n\n    const probability = PROBABILITY_DEF.get(selectedGacha);\n    if (probability === undefined) return;\n\n    const results = rollGacha(probability, times);\n    setRollResults(results);\n\n    const puCount = results.filter((r) => r === \"pu\").length;\n    const rareCount = results.filter((r) => r === \"rare\").length;\n    const loseCount = results.filter((r) => r === \"lose\").length;\n\n    setTotals({\n      total: times,\n      pu: puCount,\n      rare: rareCount,\n      lose: loseCount,\n    });\n  };\n\n  const getResultColor = (result: string): string => {\n    switch (result) {\n      case \"pu\":\n        return \"bg-yellow-400 border-yellow-500\";\n      case \"rare\":\n        return \"bg-purple-400 border-purple-500\";\n      case \"lose\":\n        return \"bg-gray-400 border-gray-500\";\n      default:\n        return \"bg-gray-300 border-gray-400\";\n    }\n  };\n\n  return (\n    <ContentPageLayout title=\"ガチャシミュ\">\n      <div className=\"prose dark:prose-invert max-w-none\">\n        <p>\n          色々なガチャを回せます。PU, すり抜け,\n          はずれから抽選されます。天井は実装が難しいため無いです。\n          <br />\n          なお、実際に存在する企業、キャラクター、人物とは一切関係ありません。\n        </p>\n\n        <div className=\"not-prose mt-8 space-y-6\">\n          <div className=\"flex flex-wrap items-center gap-4\">\n            <select\n              value={selectedGacha}\n              onChange={(e) => setSelectedGacha(e.target.value)}\n              className=\"rounded-md border border-gray-300 bg-white px-3 py-2 text-gray-900 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100\"\n            >\n              <option value=\"\">--選択してください--</option>\n              {Array.from(GACHA_NAMES.entries()).map(([key, name]) => (\n                <option key={key} value={key}>\n                  {name}\n                </option>\n              ))}\n            </select>\n\n            <div className=\"flex gap-2\">\n              <button\n                onClick={() => handleRoll(1)}\n                disabled={selectedGacha === \"\"}\n                className=\"rounded-md bg-blue-600 px-4 py-2 font-medium text-white hover:bg-blue-700 disabled:bg-gray-400\"\n              >\n                一連\n              </button>\n              <button\n                onClick={() => handleRoll(10)}\n                disabled={selectedGacha === \"\"}\n                className=\"rounded-md bg-blue-600 px-4 py-2 font-medium text-white hover:bg-blue-700 disabled:bg-gray-400\"\n              >\n                十連\n              </button>\n              <button\n                onClick={() => handleRoll(100)}\n                disabled={selectedGacha === \"\"}\n                className=\"rounded-md bg-blue-600 px-4 py-2 font-medium text-white hover:bg-blue-700 disabled:bg-gray-400\"\n              >\n                百連\n              </button>\n              <button\n                onClick={() => handleRoll(1000)}\n                disabled={selectedGacha === \"\"}\n                className=\"rounded-md bg-blue-600 px-4 py-2 font-medium text-white hover:bg-blue-700 disabled:bg-gray-400\"\n              >\n                千連\n              </button>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4 sm:grid-cols-4\">\n            <div className=\"space-y-1\">\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                回数\n              </label>\n              <input\n                type=\"number\"\n                value={totals.total}\n                readOnly\n                className=\"w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-gray-900 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100\"\n              />\n            </div>\n            <div className=\"space-y-1\">\n              <label className=\"block text-sm font-medium text-yellow-600 dark:text-yellow-400\">\n                PU\n              </label>\n              <input\n                type=\"number\"\n                value={totals.pu}\n                readOnly\n                className=\"w-full rounded-md border border-yellow-300 bg-yellow-50 px-3 py-2 text-yellow-900 dark:border-yellow-600 dark:bg-yellow-900/20 dark:text-yellow-100\"\n              />\n            </div>\n            <div className=\"space-y-1\">\n              <label className=\"block text-sm font-medium text-purple-600 dark:text-purple-400\">\n                すり抜け\n              </label>\n              <input\n                type=\"number\"\n                value={totals.rare}\n                readOnly\n                className=\"w-full rounded-md border border-purple-300 bg-purple-50 px-3 py-2 text-purple-900 dark:border-purple-600 dark:bg-purple-900/20 dark:text-purple-100\"\n              />\n            </div>\n            <div className=\"space-y-1\">\n              <label className=\"block text-sm font-medium text-gray-600 dark:text-gray-400\">\n                はずれ\n              </label>\n              <input\n                type=\"number\"\n                value={totals.lose}\n                readOnly\n                className=\"w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-gray-900 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100\"\n              />\n            </div>\n          </div>\n\n          {rollResults.length > 0 && (\n            <div className=\"space-y-2\">\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">\n                結果\n              </h3>\n              <div className=\"grid max-h-64 grid-cols-10 gap-1 overflow-y-auto rounded-lg border border-gray-300 bg-gray-50 p-4 sm:grid-cols-20 dark:border-gray-600 dark:bg-gray-800\">\n                {rollResults.map((result, index) => (\n                  <div\n                    key={index}\n                    className={`h-6 w-6 rounded border-2 ${getResultColor(result)}`}\n                    title={result}\n                  />\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </ContentPageLayout>\n  );\n};\n\nexport default Gacha;\n"],"names":["Gacha","selectedGacha","setSelectedGacha","useState","rollResults","setRollResults","totals","setTotals","PROBABILITY_DEF","GACHA_NAMES","rollGacha","probability","times","results","i","x","handleRoll","puCount","r","rareCount","loseCount","getResultColor","result","ContentPageLayout","jsxs","e","jsx","key","name","index"],"mappings":"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"}